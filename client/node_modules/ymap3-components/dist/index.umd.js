(function(e,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e["ymap3-components"]={},e.React,e.ReactDOM))})(this,function(e,t,y){"use strict";const M=t.createContext({}),d=typeof document<"u"?t.useLayoutEffect:t.useEffect;function n(o,s){let r;const c=({...a},u)=>{const{reactify:i,ymaps:p}=t.useContext(M),[z,m]=t.useState(!1);return d(()=>{s?window[s]?(m(!0),r=i.module(window[s])[o]):p.import(s).then(Y=>{window[s]=Y,i.module(Y)&&(m(!0),r=i.module(Y)[o])}):(r=i.module(p)[o],m(!0))},[]),!r||!z?null:t.createElement(r,{ref:u,...a})};return t.forwardRef(c)}const C=async(o,s="ru_RU")=>new Promise(async(r,c)=>{if(window.ymaps3){const a=window.ymaps3;await a.ready;const i=(await a.import("@yandex/ymaps3-reactify")).reactify.bindTo(t,y);i.module(a),r({ymaps:a,reactify:i})}else{const a=document.createElement("script");document.body.appendChild(a),a.type="text/javascript",a.src=`https://api-maps.yandex.ru/v3/?apikey=${o}&lang=${s}`,a.onload=async()=>{const u=window.ymaps3;await u.ready;const p=(await u.import("@yandex/ymaps3-reactify")).reactify.bindTo(t,y);r({ymaps:u,reactify:p})},a.onerror=c}}),w=({apiKey:o,lang:s,children:r,onLoad:c})=>{const[a,u]=t.useState();return d(()=>{C(o,s).then(i=>{u(i),c&&c(i)})},[]),a?t.createElement(M.Provider,{value:a},r):t.createElement(t.Fragment,null)},S=t.memo(w);var l=(o=>(o.CartesianProjection="@yandex/ymaps3-cartesian-projection@0.0.1",o.Clusterer="@yandex/ymaps3-clusterer@0.0.1",o.Controls="@yandex/ymaps3-controls@0.0.1",o.Hint="@yandex/ymaps3-hint@0.0.1",o.Markers="@yandex/ymaps3-markers@0.0.1",o.SphericalMercatorProjection="@yandex/ymaps3-spherical-mercator-projection@0.0.1",o))(l||{});const f=t.createContext({hint:void 0}),h=({children:o,context:s})=>{const r=t.useContext(s);return t.createElement(f.Provider,{value:r},o)},D=({children:o,hint:s})=>{const{reactify:r,ymaps:c}=t.useContext(M),[a,u]=t.useState(),i=t.useMemo(()=>{if(a){const p=window[l.Hint];return r.module(p).YMapHint}},[a]);return t.useEffect(()=>{if(window[l.Hint]){const p=window[l.Hint];u(r.module(p).YMapHintContext)}else c.import(l.Hint).then(p=>{window[l.Hint]=p,r.module(p)&&u(r.module(p).YMapHintContext)})},[]),!i||!a||!o?t.createElement(t.Fragment,null):t.createElement(i,{hint:s},t.createElement(h,{context:a},o))},L=n("YMapGeolocationControl",l.Controls),H=n("YMapZoomControl",l.Controls),E=n("YMapClusterer",l.Clusterer),v=n("YMapDefaultMarker",l.Markers),F=n("YMap"),T=n("YMapTileDataSource"),j=n("ThemeContext"),x=n("YMapControl"),b=n("YMapLayer"),B=n("YMapMarker"),G=n("YMapDefaultSchemeLayer"),Z=n("YMapDefaultFeaturesLayer"),$=n("YMapDefaultSatelliteLayer"),q=n("YMapListener"),I=n("YMapControls"),W=n("YMapControlButton"),k=n("YMapContainer"),O=n("YMapCollection"),U=n("YMapFeature"),_=n("YMapFeatureDataSource");e.ThemeContext=j,e.YMap=F,e.YMapClusterer=E,e.YMapCollection=O,e.YMapComponentsProvider=S,e.YMapContainer=k,e.YMapControl=x,e.YMapControlButton=W,e.YMapControls=I,e.YMapDefaultFeaturesLayer=Z,e.YMapDefaultMarker=v,e.YMapDefaultSatelliteLayer=$,e.YMapDefaultSchemeLayer=G,e.YMapFeature=U,e.YMapFeatureDataSource=_,e.YMapGeolocationControl=L,e.YMapHint=D,e.YMapHintContext=f,e.YMapLayer=b,e.YMapListener=q,e.YMapMarker=B,e.YMapTileDataSource=T,e.YMapZoomControl=H,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
